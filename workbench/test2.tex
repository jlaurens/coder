% \iffalse meta-comment
% !TEX program  = lualatex
% !TEX encoding  = utf8
\documentclass{article}
\RequirePackage{minted, verbatim}
\ExplSyntaxOn
\makeatletter
\DeclareDocumentEnvironment { InlineCode } { m } {
  \if_mode_vertical:
  \else:
  \par
  \fi:
  \noindent
  \frenchspacing
  \@vobeyspaces
  \normalfont\ttfamily
  \hyphenchar\font\m@ne
  \@noligs
  \exp_args:Nnx \setkeys { FV } {
    firstnumber=421,
  }
  \iow_open:Nn \minted@code { \jobname.pyg }
  \par\noindent OPENING_\jobname.pyg
\iow_now:Nn \minted@code { ABCDEFGH }
  \par\noindent
  \cs_set:Npn \verbatim@processline {
    \group_begin:
    \tl_set:Nx \l_tmpa_tl { \the\verbatim@line }
    \exp_args:NNV \iow_now:Nn \minted@code \l_tmpa_tl
    \par\noindent WRITE/\l_tmpa_tl/
    \group_end:
  }
  \let \do \@makeother
  \dospecials \catcode `\^^M \active
  \verbatim@start
} {
  \iow_close:N \minted@code
  \par\noindent CLOSING_\jobname.pyg
  %\exp_args:Nx \minted@pygmentize { tex }
  %\DeleteFile { \jobname.pyg }
}
\makeatother
\ExplSyntaxOff
\begin{document}
WILL DO
\begin{InlineCode}{}
ABCD
\end{InlineCode}
DONE
\end{document}

% !TeX program=lualatex
% !TeX root=../coder_test.tex


\subsection{Code}


\CDRCode[pygments=false,showspaces,engine=efbox, engine options={linecolor = red}]|AB CDE|

\CDRCode[pygments=true,showspaces,engine=efbox, engine options={linecolor = red}]|AB CDE|

\begin{CDRBlock}[tags=WHAT,numbersep=2cm]
1
2
3
\end{CDRBlock}

\ExplSyntaxOn
\group_begin:
\makeatletter

\ExplSyntaxOff

\newtcolorbox{codebox}[1]{
  colback=white!5!white,
  colframe=white!75!black,
  title=#1,
  box align=top
}


\CDRBlockEngineNew{mdframed}{}{}

\typeout{------------------================-------------------}

\begin{CDRBlock}[pygments=false]
1
2
3
\end{CDRBlock}
\begin{CDRBlock}[pygments=true]
1
2
3
\end{CDRBlock}

\begin{enumerate}
  \item Lorem.
  \item \mbox{}
  \begin{codebox}{Swap}
    \begin{Verbatim}
   Hello.
   \end{Verbatim}
  \end{codebox}
  \item Epsum.
\end{enumerate}
abcde
\begin{codebox}{Swap}
\begin{CDRBlock}[numbersep=1cm]
1
2
3
\end{CDRBlock}
\end{codebox}
abcde
\CDRBlockEngineNew{codebox}[formatcom=\color{magenta},numbersep=1cm]{\begin{codebox}{Swap}}{\end{codebox}}
\begin{CDRBlock}[engine=codebox]
1
2
3
\end{CDRBlock}

%\newcommand\pygmented@mdframed@additional@options{%
%  leftmargin=\pygmented@leftmargin,%
%  frametitlerule=true,%
%  \ifcsname pygmented@opt@colback\endcsname
%    backgroundcolor=\pygmented@opt@colback,%
%  \fi
%}

\ExplSyntaxOn
\makeatother
\group_end:
\ExplSyntaxOff


\subsection{In progress}
abcde
\begin{Verbatim}
ABCDE
\end{Verbatim}
abcde%
\ExplSyntaxOn
\group_begin:
\makeatletter
\ExplSyntaxOff
\newtcolorbox{codebox}[1]{
  colback=white!5!white,
  colframe=white!75!black,
  title=#1,
  box align=top
}%
\noindent
\def\CDR@Debug{\typeout}%
\CDRSet{
  lang=python
}
\typeout{------------------================-------------------}%
\CDRSet{tags=WHAT}
abcde
\begin{CDRBlock}[
  frame=lines,
  rulecolor=\color{red!20!yellow}
]
def function foo(x):
  '''Square function'''
  return x ** x
\end{CDRBlock}
\noindent
abcde
\begin{CDRBlock}[pygments=false,frame=lines,rulecolor=\color{red!20!yellow}]
def function foo(x):
  '''Square function'''
  return x ** x
\end{CDRBlock}
abcde
\begin{CDRBlock}
def function foo(x):
  '''Square function'''
  return x ** x
\end{CDRBlock}
abcde

\ExplSyntaxOn
\makeatother
\group_end:
\ExplSyntaxOff

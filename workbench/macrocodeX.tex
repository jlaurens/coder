% !TEX program=lualatex
\documentclass{article}
\RequirePackage{macrocode}
\MacroCodeSetup{
  minted,
  minted style=autumn,
  post processor=post-minted.py,
  post processor args= MacroCodeEmph MyMarvelousCommand,
}
\MacroCodeStorePreamble {\myPreamble}{../sty-preamble.tex}%
\MacroCodeFile [key=sty, preamble = \myPreamble] {bealoverX.sty}%

\begin{document}
\setminted {
  autogobble,
}
ABC
DEF\\
\begin{MacroCode}{sty}
\newcommand[1]{\MyMarvelousCommand}{
  \texttt{Do something with \LaTeX}
}
\end{MacroCode}
\begin{MacroCode}*{sty}
\newcommand[1]{\MyMarvelousCommand}{
  \texttt{Do something with \LaTeX}
}
\end{MacroCode}
\end{document}